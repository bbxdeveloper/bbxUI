<nb-card class="modal-product-active">
    <nb-card-header class="modal-product-active-header">
        <span>Bizonylat mentése</span>
    </nb-card-header>
    <nb-card-body class="modal-product-active-body">
        <form *ngIf="!!sumForm" [formGroup]="sumForm" #formDirective="ngForm" id="invoiceSaveForm">
            <nb-form-field>
                <div class="bbx-fd-form-field-inner-div">
                    <label>Összes nettó:</label>
                    <input [inputMask]="numberInputMask" class="right" nbInput type="text" formControlName="invoiceNetAmount">
                </div>
            </nb-form-field>

            <nb-form-field (keydown.enter)="MoveToSaveButtons($event)">
                <div class="bbx-fd-form-field-inner-div">
                    <label>Kedvezmény:</label>
                    <input class="{{TileCssClass}} discount-input" nbInput type="text" formControlName='invoiceDiscountPercent'
                        required="true" [inputMask]="numberInputMask" [placeholder]="discountInputPlaceHolder"
                        (click)="formNav.HandleFormFieldClick($event)" (focusout)="RefreshCalc()">
                </div>
            </nb-form-field>

            <nb-form-field>
                <div class="bbx-fd-form-field-inner-div">
                    <label>Kedvezménnyel csökkentett nettó:</label>
                    <input [inputMask]="numberInputMask" class="right" nbInput type="text" formControlName="discountedInvoiceNetAmount">
                </div>
            </nb-form-field>

            <nb-form-field *ngFor="let item of vatRateCodes; let rowPos = index">
                <div class="bbx-fd-form-field-inner-div">
                    <label>Összes {{item.Id}} áfa:</label>
                    <input (focusout)="RefreshCalc()"
                     [inputMask]="numberInputMask" class="right" nbInput type="text" formControlName="{{'vatRateFormControl-' + rowPos}}">
                </div>
            </nb-form-field>

            <nb-form-field>
                <div class="bbx-fd-form-field-inner-div">
                    <label>Összes bruttó:</label>
                    <input [inputMask]="numberInputMask" class="right" nbInput type="text" formControlName="lineGrossAmount">
                </div>
            </nb-form-field>

            <nb-form-field>
                <div class="bbx-fd-form-field-inner-div">
                    <label>Termékek száma:</label>
                    <input nbInput type="text" formControlName="invoiceLinesCount">
                </div>
            </nb-form-field>
        </form>
    </nb-card-body>
    <nb-card-footer class="modal-product-active-footer">
        <button nbButton (click)="close(true)" status="primary" tabindex="-1" id="confirm-dialog-button-yes">Igen</button>
        <button nbButton (click)="close(false)" status="danger" tabindex="-1" id="confirm-dialog-button-no">Nem</button>
    </nb-card-footer>
</nb-card>